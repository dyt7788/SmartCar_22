/*LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
?????钩    ???�??寳浜??緳閭辨櫤????鎶�TC2/3xx??稿績?�
?????紪    ???�??hiusir
??????-mail?????hiusir@163.com
?????????増????�???1.1 ??????�??夛??????跨敤???峰?鑱?????鎺????
?????渶??庢洿????�?2021Ϳ1????18????
?????????俊鎭??弬?????????湴鍧�???
???????    绔?�??ttp://www.lqist.cn
?????????簵閾??�??ttp://longqiu.taobao.com
------------------------------------------------
?????ev.env.?????URIX Development Studio1.2.2????互???増???
?????arget ???? TC2/3xx
?????rystal???? 20.000Mhz
?????YS PLL???? 200/300MHz
________________________________________________________________
?轰簬iLLD_1_0_1_11_0???眰绋嬪?,
?跨敤渚嬬????????寤鸿?????娌???绌?牸??嫳????寰勶?
=================================================================
绋嬪簭閰??????????歨ttps://space.bilibili.com/95313236
=================================================================
????澶存帴??�                  榫??????????�匫V7725妯?潡
??� ???????绔?????02.0-P02.7?????�8?嶏?鎺??????鐨???鎹?????紱
??� ??????????氬???????????0??細P00_4??�
??� ?轰??凤細澶?????????绗�3??細P15_1??�
-----------------------------------------------------------------
????GPT12妯?潡??屽?????????5????????鐮佸???忕紪?佸?????瑰????????????鍣???????彿??泦?屼??忛�夋嫨?涜矾???彲??�
P33_7, P33_6   榫??TC??澘?????鍣?1
P02_8, P33_5   榫??TC??澘?????鍣?2
P10_3, P10_1   榫??TC??澘?????鍣?3
P20_3, P20_0   榫??TC??澘?????鍣?4
-----------------------------------------------------------------
????????????泦妯??潡??�呴害?嬮??妯??潡
????浣跨敤AN0-7??屽????矾ADC??屽彲??弧??砪hirp澹伴??????彿?????纾佽?????????????泦?�
AN0-3          榫??TC???????害?嬮??妯??潡??�呯???
-----------------------------------------------------------------
榛樿??鐢???????
?跨敤GTM妯?潡???TOM?涗?閫氶亾???????4*8??�32??WM????�屼笖?勮??棰??巼??屽崰??瘮?????屾帹鑽???????TOM0??0-7?氶亾??�
绗?竴??弻璺???????�
P23_1         榫??TC??澘MOTOR1_P
P32_4         榫??TC??澘MOTOR1_N
P21_2         榫??TC??澘MOTOR2_P
P22_3         榫??TC??澘MOTOR2_N
绗?簩??弻璺???????�
P21_4         榫??TC??澘MOTOR3_P
P21_3         榫??TC??澘MOTOR3_N
P20_8         榫??TC??澘MOTOR4_P
P21_5         榫??TC??澘MOTOR4_N
-----------------------------------------------------------------
榛樿??鑸???????
?跨敤GTM妯?潡???TOM?涗?閫氶亾???????4*8??�32??WM????�屼笖?勮??棰??巼??屽崰??瘮?????屾帹鑽???????TOM2??�
P33_10        榫??TC??澘鑸??1
P33_13        榫??TC??澘鑸??2
-----------------------------------------------------------------
 榛樿????箷??????鎺????????峰彲浠??????FT??�匫LED妯?潡
TFTSPI_CS     P20_14     榫??TC??? CS绠¤剼 榛樿??鎷変????屽彲???鐢?
TFTSPI_SCK    P20_11     榫??TC??? SPI SCK绠¤剼
TFTSPI_SDI    P20_10     榫??TC??? SPI MOSI绠¤剼
TFTSPI_DC     P20_12     榫??TC??? D/C绠¤剼
TFTSPI_RST    P20_13     榫??TC??? RESET绠¤剼
-----------------------------------------------------------------
OLED_CK       P20_14     榫??TC??澘OLED CK绠¤剼
OLED_DI       P20_11     榫??TC??澘OLED DI绠¤剼
OLED_RST      P20_10     榫??TC??澘OLED RST绠¤剼
OLED_DC       P20_12     榫??TC??澘OLED DC绠¤剼
OLED_CS       P20_13     榫??TC??澘OLED CS绠¤剼 榛樿??鎷変????屽彲???鐢?
----------------------------------------------------------------
榛樿??鎸夐敭?????
KEY0p         P22_0      榫??TC??澘???寜閿?0
KEY1p         P22_1      榫??TC??澘???寜閿?1
KEY2p         P22_2      榫??TC??澘???寜閿?2
DSW0p         P33_9      榫??TC??澘???嫧鐮佸??�0
DSW1p         P33_11     榫??TC??澘???嫧鐮佸??�1
-----------------------------------------------------------------
榛樿??LED?????
LED0p         P10_6      榫??TC??澘?稿績?夸?LED0 ???
LED1p         P10_5      榫??TC??澘?稿績?夸?LED1 ?????
LED2p         P20_6      榫??TC??澘??ED0
LED3p         P20_7      榫??TC??澘??ED1
-----------------------------------------------------------------
榛樿?????鍣??帴??�
BEEPp         P33_8      榫??TC??澘???渹楦?櫒鎺????
-----------------------------------------------------------------
??氭???
???変袱涓狢CU6妯?潡  ?忎?妯??潡???変袱涓??嫭?嬪????跺??  ???????氭????????
????浣跨敤CCU6妯?潡??孲TM????绯?粺?????鿦?�呭欢??讹紱
QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ*/

#include <include.h>//??勪??妯??潡????????
#include <IfxCpu.h>
#include <IfxScuCcu.h>
#include <IfxScuWdt.h>
#include <IfxStm.h>
#include <IfxStm_reg.h>
#include <LQ_GPIO_KEY.h>
#include <LQ_GPIO_LED.h>
#include <LQ_Inductor.h>
#include <LQ_MotorServo.h>
#include <LQ_STM.h>
#include <LQ_TFT18.h>
#include <LQ_UART.h>
#include <Platform_Types.h>
#include <stdio.h>

App_Cpu0 g_AppCpu0; // brief CPU 0 global data
IfxCpu_mutexLock mutexCpu0InitIsOk = 1;   // CPU0 ???????栧????爣?椾??
volatile char mutexCpu0TFTIsOk=0;         // CPU1 0??犵?/1????? TFT

/*************************************************************************
*  ??芥????О?歩nt core0_main (void)
*  ??????存??欳PU0涓诲?????
*  ??????存??氭?
*  ??芥?????洖?氭?
*  ???敼?????棿??�2020Ϳ3????10????
*  澶�    娉?細
*************************************************************************/
int core0_main (void)
{
    //char txt[16];

	// ??抽棴CPU?讳????
	IfxCpu_disableInterrupts();

	// ??抽棴鐪嬮棬????濡?????????????????????????�?佸?????
	IfxScuWdt_disableCpuWatchdog(IfxScuWdt_getCpuWatchdogPassword());
	IfxScuWdt_disableSafetyWatchdog(IfxScuWdt_getSafetyWatchdogPassword());

	// ???诲??????棰??巼
	g_AppCpu0.info.pllFreq = IfxScuCcu_getPllFrequency();
	g_AppCpu0.info.cpuFreq = IfxScuCcu_getCpuFrequency(IfxCpu_getCoreIndex());
	g_AppCpu0.info.sysFreq = IfxScuCcu_getSpbFrequency();
	g_AppCpu0.info.stmFreq = IfxStm_getFrequency(&MODULE_STM0);

	TFTSPI_Init(0);               // TFT1.8???????�0:妯?????  1??氱???Ϳ
	TFTSPI_CLS(u16BLACK);         // 娓呭???
	TFTSPI_Show_Logo(0,37);       // ??????榫欓?LOGO
	TFTSPI_P16x16Str(0,0,(unsigned char*)"??椾?榫????鸿???妧",u16RED,u16BLUE);// ???????涓?????
	delayms(1000);
	// ?夐敭???????�
	GPIO_KEY_Init();
	// LED????鐢???10.6??孭10.5???????�
	GPIO_LED_Init();

	// 涓??P14.0绠¤剼?????,P14.1?????????屾尝?圭?115200
	UART_InitConfig(UART0_RX_P14_1,UART0_TX_P14_0, 115200);

	// 寮�???PU?讳????
	IfxCpu_enableInterrupts();

	// ?氱?CPU2????PU1???PU0???????栧???
	IfxCpu_releaseMutex(&mutexCpu0InitIsOk);

	// ??囪??CPU0,CPU1...涓??彲?????跺?????骞??樉???紝??????茬?????樉???
	mutexCpu0TFTIsOk=0;      // CPU1??� 0??犵?/1????? TFT

    // 绋嬪簭閰??????????歨ttps://space.bilibili.com/95313236
    // 浠???娴嬭???芥???屽?寤??寰??????????峰彲???敤?�鐢?????殑??????栧強??诲??芥????????????宸辩??诲姟?屽姟???????????????鐢??PU
	//________________________________________________________________________________
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//    Test_ADC_OLED();      //PASS,娴嬭?ADC????????棿  OLED涓??樉??? ADC???10K?????????
//    Test_ADC_TFT();        //PASS,娴嬭?ADC????????棿 TFT涓??樉??? ADC???10K?????????
//    Test_ADC_7mic();       //PASS,娴嬭?ADC\UART0???丼TM寤???????棯?紝閫氳??UART0??? AN0--AN7??�8涓??�氶亾ADC????崲??????
//    Test_GPIO_Extern_Int();//PASS,娴嬭?澶???�1?????????15.8??孭10.6??孭10.5???????
  // TestMotor();	         //PASS,娴嬭??????芥?????�氳??夐敭???敼?????PWM??屽湪TFT1.8???箷?????????�氳????畾涔?�夋嫨??瑰簲鐨????????
   // TestServo();	         //PASS,娴嬭??????芥?????�氳??夐敭???敼?????PWM??屽湪TFT1.8???箷???????
  // TestEncoder();         //PASS,娴嬭?????鍣?????箷???????????鍣????硷紝?瑰簲姣?増???紪鐮佸??2????紪鐮佸??4?氶亾
//    Test_GPIO_LED();       //PASS,娴嬭?GPIO??孭10.6??孭10.5???????
//    Test_GPIO_KEY();       //PASS,娴嬭?澶??鎸夐敭?????????孭22.0--2   ?変???夐敭 LED浜�
//    Test_ComKEY_Tft();     //PASS,娴嬭?澶???????鎸夐敭???????骞禩FT1.8???????孭22.0--2
//    Test_OLED();           //PASS,娴嬭?OLED0.96?????????20.14--10??屾樉??????绗︿?????姩鎬佹?鎹?
//    LQ_STM_Timer();        //PASS,娴嬭???氭?涓?????????棯?�
//    LQ_CCU6_Timer();       //PASS,娴嬭???氭?涓?????????棯?紝CC60榛樿????綜PU0娴嬭????CU61榛樿????綜PU1娴嬭?
//    Test_TFT18();          //PASS,娴嬭?TFT1.8褰??????跨敤P20.14--10??屾樉??????绗︿?????姩鎬佹?鎹?
//    LQ_TIM_InputCature();  //PASS,娴嬭?GTM_TOM_TIM????20_9??负PWM?????????P15_0??负TIM??????????????�呯??鎺????屼?????14.0??戦�佸??????????
//    Test_Bluetooth();      //PASS,娴嬭?UART0(P14.0RX/P14.1TX)??�
//    Test_EEPROM();         //PASS,娴嬭???呴??EEPROM????????  OLED????????????????????
//    Test_Vl53();           //PASS,娴嬭?VL53  IIC?????   P13_1???CL  P13_2???DA OLED???????????????
//    Test_MPU6050();        //PASS,娴嬭?MPU6050??�匢CM20602 IIC?????   P13_1???CL  P13_2???DA OLED???????????????
//    Test_ICM20602();       //PASS,娴嬭?ICM20602 SPI?????   P15_8???CL  P15_5???DA  P15_7???A  P15_2???S OLED???????????????
   // Test_CAMERA();         //PASS,榛樿????綜PU0涓?祴????緳閭辩????????跺湪??箷涓??樉???  LQ_CAMERA.h 涓?�夋嫨???箷
//    Test_SoftFft();        //PASS,娴嬭?ILLD??殑??欢FFT??芥???????FT???�?佽姱?囧????�甯?A??墠??夌???FT?????
//    Test_RDA5807();        //PASS,娴嬭?RDA5807绔嬩綋澹??????虫?SCL ?? P00_1   SDA ?? P00_2

	//________________________________________________________________________________
    //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//	test();
//	circle();//?????
    while (1)	//涓诲???�
    {
        CameraCar();
       LED_Ctrl(LED0, RVS);     // LED????????? ?????嬪簭杩?????�?
       delayms(20);
    }
}
